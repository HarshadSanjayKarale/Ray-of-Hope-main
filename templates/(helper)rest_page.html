<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ray of Hope</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='(helper)rest_page.css') }}">
</head>
<body>
    <div class="container">
        <div class="card-container1">
            <div class="profile-details">
                <!-- Add profile details here -->
                <!-- For example: -->
                <h2>Profile Details</h2>
                    <p>Name: {{ data.get('name') }}</p>
                    <p>Email: {{ data.get('email') }}</p>
                    <p>Phone: {{ data.get('contact') }}</p>
            </div>
        </div>
    </div>
    <!-- <div class="container"> -->
        <!-- <div class="card-container"> -->
            <!-- <h1 class="heading">You Helping to Students</h1> -->
            <!-- <table>
                <tr>
                    <th>Name</th>
                    <th>Date</th>
                    <th>Time Slot</th>
                    <th>Subject</th>
                    <th>Location</th>
                    <th>Contact</th>
                </tr> -->
                <!-- {% for helpee in helpees %}
                {% if not helpee.helper_found %}
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                {% endif %}
                {% endfor %} -->
            <!-- </table> -->
        <!-- </div> -->
    <!-- </div> -->
    <div class="container">
        <div class="card-container">
            <h1 class="heading">Students Need the Help</h1>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Date</th>
                    <th>Time Slot</th>
                    <th>Subject</th>
                    <th>Location</th>
                    <th>Contact</th>
                    <th>Help</th>
                </tr>
                {% if not info %}
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                {% endif %}
                {% for info in exam_info %}
                <tr>
                    <td>{{ info.get('name') }}</td>
                    <td>{{ info.get('exam_date') }}</td>
                    <td>{{ info.get('start_time') }} - {{ info.get('end_time') }}</td>
                    <td>{{ info.get('subject') }}</td>
                    <td>{{ info.get('location') }}</td>
                    <td>{{ info.get('contact') }}</td>
                    <td><button onclick="onHelpButtonClick(`{{ info.get('_examid') }}`, `{{ info.get('_parentnode') }}`)">Help</button></td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <script>
    function onHelpButtonClick(examId, parentNode) {
        // Send the data to a Python function using a fetch POST request
        fetch('/help_button_clicked', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ examid: examId, parentnode: parentNode }) // Send examId and parentNode as JSON data in the request body
        })
        .then(response => {
            if (response.ok) {
                console.log('Help button clicked successfully!');
                // Optionally, you can update the UI or show a success message to the user
            } else {
                console.log('Failed to click the Help button.');
            }
        })
        .catch(error => {
            console.error('Error occurred while clicking the Help button:', error);
        });
    }
</script>

</body>
</html>